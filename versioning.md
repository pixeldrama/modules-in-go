# Go Module Versioning

Go modules support various ways to specify dependency versions, including semantic versions, branches, and specific commits.

## Version Types

### 1. Semantic Versions
```go
require (
    github.com/pkg/errors v1.2.3
    github.com/gin-gonic/gin v1.9.0
)
```

### 2. Pseudo-versions
```go
require (
    github.com/pkg/errors v0.0.0-20220331215715-1124e2a89491
)
```

Pseudo-versions are automatically generated by Go when you reference a specific commit that doesn't have a semantic version tag. The format is:
```
v0.0.0-YYYYMMDDHHMMSS-abcdef123456
```

Where:
- `v0.0.0` is a base version (usually v0.0.0 for untagged commits)
- `YYYYMMDDHHMMSS` is the commit timestamp in UTC
- `abcdef123456` is the commit hash prefix

The date in pseudo-versions serves several important purposes:
1. **Ordering**: The timestamp allows Go to sort commits chronologically
2. **Reproducibility**: The exact timestamp ensures the same commit is always selected
3. **Compatibility**: The date helps determine which version is newer when comparing commits
4. **Stability**: Even if the commit hash is the same, different timestamps indicate different states

Example of how pseudo-versions work:
```go
// These are equivalent:
require github.com/pkg/errors v0.0.0-20220331215715-1124e2a89491
require github.com/pkg/errors@1124e2a89491

// Go will automatically convert the commit hash to a pseudo-version
```

### 3. Branch References
```go
require (
    github.com/pkg/errors master
    github.com/gin-gonic/gin develop
)
```

### 4. Commit References
```go
require (
    github.com/pkg/errors v0.0.0-20220331215715-1124e2a89491
    github.com/gin-gonic/gin v1.9.0-0.20220331215715-1124e2a89491
)
```

## Version Constraints

### 1. Exact Version
```go
require github.com/pkg/errors v1.2.3
```

### 2. Version Range
```go
require (
    github.com/pkg/errors v1.2.3
    github.com/gin-gonic/gin v1.9.0
)
```

### 3. Latest Version
```go
require github.com/pkg/errors latest
```

### 4. Version Comparison
```go
require (
    github.com/pkg/errors >=v1.2.3
    github.com/gin-gonic/gin <v2.0.0
)
```

## Best Practices

### 1. Version Pinning
- Always pin to specific versions in production
- Avoid using `latest` in production code
- Use semantic versions for stable releases

### 2. Branch Usage
- Use branches for development
- Avoid using branches in production
- Consider using replace directives for local development

### 3. Commit References
- Use commit hashes for reproducible builds
- Useful for testing specific fixes
- Can be used to work around version conflicts

## Common Patterns

### 1. Development Workflow
```go
// go.mod
require (
    github.com/pkg/errors v1.2.3
)

// For local development
replace github.com/pkg/errors => ../errors
```

### 2. Testing Specific Commits
```go
require (
    github.com/pkg/errors v0.0.0-20220331215715-1124e2a89491
)
```

### 3. Using Branches
```go
require (
    github.com/pkg/errors master
)

// Update to specific commit
go get github.com/pkg/errors@1124e2a89491
```

## Version Management Commands

```bash
# Update to latest version
go get -u github.com/pkg/errors

# Update to specific version
go get github.com/pkg/errors@v1.2.3

# Update to specific commit
go get github.com/pkg/errors@1124e2a89491

# Update to latest commit on branch
go get github.com/pkg/errors@master

# List available versions
go list -m -versions github.com/pkg/errors
```

## Version Selection Rules

1. **Precedence Order**
   - Semantic versions
   - Pseudo-versions
   - Branch names
   - Commit hashes

2. **Compatibility**
   - Same major version required
   - Different major versions treated as different modules
   - Branch names always point to latest commit

3. **Security**
   - Always verify commit hashes
   - Use signed tags when available
   - Consider using checksum database

## Example Scenarios

### 1. Development with Local Changes
```go
// go.mod
require (
    github.com/pkg/errors v1.2.3
)

// For local development
replace github.com/pkg/errors => ../errors
```

### 2. Testing Unreleased Features
```go
require (
    github.com/pkg/errors master
)

// After testing
require (
    github.com/pkg/errors v1.2.3
)
```

### 3. Using Specific Commits
```go
require (
    github.com/pkg/errors v0.0.0-20220331215715-1124e2a89491
)
``` 